<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>Alexis Madrigal</title>
  <link rel="preconnect" href="https://fonts.googleapis.com">
  <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
  <link href="https://fonts.googleapis.com/css2?family=Inter:wght@400;500;600;700;800;900&family=DM+Serif+Display&display=swap" rel="stylesheet">
  <style>
    :root {
      --hull-navy: #0F1A2E;
      --container-pink: #D6366E;
      --container-teal: #0C7C8C;
      --container-green: #1D6B45;
      --container-red: #B33A2B;
      --steel-gray: #3A4150;
      --crane-yellow: #D4A843;
      --sky-wash: #E8E2D8;
      --paper: #F5F0E8;
      --ink: #1A1A1A;
    }

    * {
      margin: 0;
      padding: 0;
      box-sizing: border-box;
    }

    html {
      scroll-behavior: smooth;
    }

    body {
      font-family: 'Inter', -apple-system, sans-serif;
      color: var(--ink);
      background: var(--hull-navy);
      overflow-x: hidden;
    }

    /* ── NAV ── */
    nav {
      position: fixed;
      top: 0;
      left: 0;
      right: 0;
      z-index: 100;
      background: var(--hull-navy);
      border-bottom: 3px solid var(--container-pink);
      padding: 0 2rem;
      display: flex;
      align-items: center;
      justify-content: space-between;
      height: 56px;
    }

    nav .name {
      font-weight: 800;
      font-size: 0.85rem;
      letter-spacing: 0.12em;
      text-transform: uppercase;
      color: var(--paper);
    }

    nav .nav-links {
      display: flex;
      gap: 1.5rem;
    }

    nav .nav-links a {
      color: rgba(245, 240, 232, 0.7);
      text-decoration: none;
      font-size: 0.75rem;
      font-weight: 600;
      letter-spacing: 0.08em;
      text-transform: uppercase;
      transition: color 0.2s;
    }

    nav .nav-links a:hover {
      color: var(--container-pink);
    }

    /* ── HERO ── */
    .hero {
      margin-top: 56px;
      min-height: 85vh;
      background: var(--hull-navy);
      display: grid;
      grid-template-columns: 1fr 1fr;
      position: relative;
      overflow: hidden;
    }

    .hero-text {
      display: flex;
      flex-direction: column;
      justify-content: center;
      padding: 4rem 3rem 4rem 4rem;
      position: relative;
      z-index: 2;
    }

    .hero h1 {
      font-family: 'DM Serif Display', serif;
      font-size: clamp(2.8rem, 5vw, 4.2rem);
      line-height: 1.05;
      color: var(--paper);
      margin-bottom: 1.2rem;
    }

    .hero .subtitle {
      font-size: 1.05rem;
      font-weight: 400;
      color: rgba(245, 240, 232, 0.65);
      line-height: 1.7;
      max-width: 420px;
    }

    .hero-image {
      position: relative;
      display: flex;
      align-items: center;
      justify-content: center;
      padding: 3rem;
    }

    .hero-image img {
      max-height: 55vh;
      width: auto;
      max-width: 90%;
      object-fit: cover;
      position: relative;
      z-index: 2;
    }

    /* Decorative color blocks behind headshot */
    .hero-image::before {
      content: '';
      position: absolute;
      top: 15%;
      right: 8%;
      width: 50%;
      height: 55%;
      background: var(--container-pink);
      opacity: 0.12;
      z-index: 1;
    }

    .hero-image::after {
      content: '';
      position: absolute;
      bottom: 12%;
      right: 20%;
      width: 35%;
      height: 25%;
      background: var(--container-teal);
      opacity: 0.1;
      z-index: 1;
    }

    /* ── BAY / SHIPPING AMBIENT ANIMATION ── */
    .hero-drift {
      position: absolute;
      inset: 0;
      overflow: hidden;
      z-index: 0;
      pointer-events: none;
    }

    .drift-block {
      position: absolute;
      will-change: transform;
    }

    .drift-block:nth-child(1) {
      width: 120px;
      height: 28px;
      background: var(--container-pink);
      opacity: 0.06;
      top: 72%;
      animation: drift-slow 90s linear infinite;
    }

    .drift-block:nth-child(2) {
      width: 80px;
      height: 20px;
      background: var(--container-teal);
      opacity: 0.07;
      top: 58%;
      animation: drift-slow 70s linear infinite;
      animation-delay: -30s;
    }

    .drift-block:nth-child(3) {
      width: 160px;
      height: 22px;
      background: var(--crane-yellow);
      opacity: 0.04;
      top: 82%;
      animation: drift-slow 110s linear infinite;
      animation-delay: -55s;
    }

    .drift-block:nth-child(4) {
      width: 60px;
      height: 16px;
      background: var(--container-red);
      opacity: 0.05;
      top: 48%;
      animation: drift-slow 80s linear infinite;
      animation-delay: -15s;
    }

    .drift-block:nth-child(5) {
      width: 100px;
      height: 24px;
      background: var(--container-green);
      opacity: 0.05;
      top: 66%;
      animation: drift-slow 100s linear infinite;
      animation-delay: -70s;
    }

    @keyframes drift-slow {
      0%   { transform: translateX(110vw); }
      100% { transform: translateX(-200px); }
    }

    /* Subtle water shimmer at the bottom of the hero */
    .hero-water {
      position: absolute;
      bottom: 0;
      left: 0;
      right: 0;
      height: 3px;
      background: linear-gradient(
        90deg,
        transparent,
        rgba(12, 124, 140, 0.15),
        rgba(212, 168, 67, 0.08),
        rgba(12, 124, 140, 0.12),
        transparent
      );
      background-size: 200% 100%;
      animation: shimmer 8s ease-in-out infinite;
      z-index: 3;
    }

    @keyframes shimmer {
      0%, 100% { background-position: 200% 0; }
      50%      { background-position: -200% 0; }
    }

    @media (prefers-reduced-motion: reduce) {
      .drift-block, .hero-water { animation: none; }
    }

    /* ── SECTION BLOCKS ── */
    .block {
      padding: 3.5rem 4rem;
      position: relative;
    }

    .block-label {
      font-size: 0.7rem;
      font-weight: 700;
      letter-spacing: 0.2em;
      text-transform: uppercase;
      margin-bottom: 1.5rem;
      opacity: 0.6;
    }

    .block h2 {
      font-family: 'DM Serif Display', serif;
      font-size: clamp(1.8rem, 3vw, 2.6rem);
      line-height: 1.15;
      margin-bottom: 1rem;
    }

    .block p {
      font-size: 1rem;
      line-height: 1.75;
      max-width: 580px;
    }

    .block a.cta {
      display: inline-block;
      margin-top: 1.5rem;
      padding: 0.7rem 1.8rem;
      font-size: 0.8rem;
      font-weight: 700;
      letter-spacing: 0.1em;
      text-transform: uppercase;
      text-decoration: none;
      border: 2px solid currentColor;
      transition: all 0.25s;
    }

    .block a.cta:hover {
      transform: translateY(-1px);
    }

    /* ── NEWSLETTER (ONE GOOD THING) SECTION ── */
    .newsletter-section {
      background: var(--crane-yellow);
      color: var(--hull-navy);
      display: grid;
      grid-template-columns: 1fr 1fr;
      gap: 3rem;
      align-items: center;
    }

    .newsletter-section .block-label {
      color: rgba(15, 26, 46, 0.45);
    }

    .newsletter-section h2 {
      color: var(--hull-navy);
    }

    .newsletter-section p {
      color: rgba(15, 26, 46, 0.8);
    }

    .newsletter-section a.cta {
      color: var(--hull-navy);
      border-color: var(--hull-navy);
    }

    .newsletter-section a.cta:hover {
      background: var(--hull-navy);
      color: var(--crane-yellow);
    }

    .newsletter-image {
      display: flex;
      justify-content: center;
    }

    .newsletter-image img {
      max-height: 340px;
      width: auto;
      max-width: 100%;
    }

    @media (max-width: 900px) {
      .newsletter-section {
        grid-template-columns: 1fr;
      }
      .newsletter-image {
        order: 1;
      }
      .newsletter-section .newsletter-info {
        order: 2;
      }
    }

    /* ── BOOK SECTION ── */
    .book-section {
      background: var(--container-pink);
      color: var(--paper);
      display: grid;
      grid-template-columns: 1fr 1fr;
      gap: 3rem;
      align-items: center;
    }

    .book-section .book-info {
      padding-right: 2rem;
    }

    .book-section .book-cover {
      display: flex;
      justify-content: center;
    }

    .book-section .book-cover img {
      max-height: 420px;
      width: auto;
      box-shadow: 0 20px 60px rgba(0,0,0,0.35);
    }

    .book-section .block-label {
      color: rgba(245, 240, 232, 0.5);
    }

    .book-section a.cta {
      color: var(--paper);
      border-color: var(--paper);
    }

    .book-section a.cta:hover {
      background: var(--paper);
      color: var(--container-pink);
    }

    /* ── FORUM SECTION ── */
    .forum-section {
      background: var(--paper);
      color: var(--ink);
    }

    .forum-section .block-label {
      color: var(--container-teal);
    }

    .forum-inner {
      display: grid;
      grid-template-columns: 1fr 1fr;
      gap: 3rem;
      align-items: start;
    }

    .forum-desc p {
      color: #4A4A4A;
    }

    .forum-desc a.cta {
      color: var(--container-teal);
      border-color: var(--container-teal);
    }

    .forum-desc a.cta:hover {
      background: var(--container-teal);
      color: var(--paper);
    }

    .forum-episodes {
      background: var(--hull-navy);
      color: var(--paper);
      padding: 2rem;
      position: relative;
    }

    .forum-episodes::before {
      content: '';
      position: absolute;
      top: 0;
      left: 0;
      width: 4px;
      height: 100%;
      background: var(--container-teal);
    }

    .forum-episodes h3 {
      font-size: 0.7rem;
      font-weight: 700;
      letter-spacing: 0.15em;
      text-transform: uppercase;
      color: var(--container-teal);
      margin-bottom: 1.2rem;
    }

    .episode-card {
      padding: 1rem 0;
      border-bottom: 1px solid rgba(245, 240, 232, 0.1);
    }

    .episode-card:last-child {
      border-bottom: none;
    }

    .episode-date {
      font-size: 0.72rem;
      font-weight: 600;
      letter-spacing: 0.08em;
      text-transform: uppercase;
      color: var(--container-teal);
      margin-bottom: 0.3rem;
    }

    .episode-title {
      font-weight: 600;
      font-size: 0.95rem;
      line-height: 1.4;
      color: var(--paper);
    }

    .episode-title a {
      color: inherit;
      text-decoration: none;
    }

    .episode-title a:hover {
      text-decoration: underline;
    }

    .episode-listen {
      margin-top: 0.5rem;
    }

    .episode-listen a {
      font-size: 0.72rem;
      font-weight: 700;
      letter-spacing: 0.1em;
      text-transform: uppercase;
      color: var(--container-pink);
      text-decoration: none;
    }

    .episode-listen a:hover {
      text-decoration: underline;
    }

    /* ── LOCAL ECONOMY SECTION ── */
    .local-economy-section {
      background: var(--container-green);
      color: var(--paper);
    }

    .local-economy-section .block-label {
      color: rgba(245, 240, 232, 0.45);
    }

    .le-inner {
      display: grid;
      grid-template-columns: 1.2fr 1fr;
      gap: 3rem;
      align-items: start;
    }

    .le-desc p {
      color: rgba(245, 240, 232, 0.85);
    }

    .le-desc a.cta {
      color: var(--paper);
      border-color: var(--paper);
    }

    .le-desc a.cta:hover {
      background: var(--paper);
      color: var(--container-green);
    }

    .le-events {
      background: rgba(0,0,0,0.2);
      padding: 2rem;
      position: relative;
    }

    .le-events::before {
      content: '';
      position: absolute;
      top: 0;
      left: 0;
      width: 4px;
      height: 100%;
      background: var(--crane-yellow);
    }

    .le-events h3 {
      font-size: 0.7rem;
      font-weight: 700;
      letter-spacing: 0.15em;
      text-transform: uppercase;
      color: var(--crane-yellow);
      margin-bottom: 1.2rem;
    }

    .event-card {
      padding: 1rem 0;
      border-bottom: 1px solid rgba(245, 240, 232, 0.1);
    }

    .event-card:last-child {
      border-bottom: none;
    }

    .event-date {
      font-size: 0.72rem;
      font-weight: 600;
      letter-spacing: 0.08em;
      text-transform: uppercase;
      color: var(--crane-yellow);
      margin-bottom: 0.3rem;
    }

    .event-name {
      font-weight: 600;
      font-size: 0.95rem;
      line-height: 1.4;
    }

    .event-name a {
      color: var(--paper);
      text-decoration: none;
    }

    .event-name a:hover {
      text-decoration: underline;
    }

    .event-desc-text {
      font-size: 0.82rem;
      line-height: 1.5;
      color: rgba(245, 240, 232, 0.65);
      margin-top: 0.3rem;
    }

    .no-events {
      font-size: 0.9rem;
      color: rgba(245, 240, 232, 0.6);
      font-style: italic;
    }

    /* ── ARCHIVE SECTION ── */
    .archive-section {
      background: var(--container-teal);
      color: var(--paper);
      display: grid;
      grid-template-columns: 1fr 1fr;
      gap: 3rem;
      align-items: center;
    }

    .archive-section .block-label {
      color: rgba(245, 240, 232, 0.45);
    }

    .archive-section a.cta {
      color: var(--paper);
      border-color: var(--paper);
    }

    .archive-section a.cta:hover {
      background: var(--paper);
      color: var(--container-teal);
    }

    .archive-visual {
      display: flex;
      align-items: center;
      justify-content: center;
      padding: 2rem;
    }

    .archive-graphic {
      width: 180px;
      height: 180px;
      border: 3px solid rgba(245, 240, 232, 0.3);
      display: flex;
      align-items: center;
      justify-content: center;
      font-family: 'DM Serif Display', serif;
      font-size: 1.4rem;
      text-align: center;
      line-height: 1.3;
      color: rgba(245, 240, 232, 0.8);
      position: relative;
    }

    .archive-graphic::before {
      content: '';
      position: absolute;
      top: -8px;
      left: -8px;
      right: -8px;
      bottom: -8px;
      border: 1px solid rgba(245, 240, 232, 0.15);
    }

    /* ── CONTAINERS PODCAST SECTION ── */
    .containers-section {
      background: var(--container-red);
      color: var(--paper);
      display: grid;
      grid-template-columns: 1fr 1fr;
      gap: 3rem;
      align-items: center;
    }

    .containers-section .block-label {
      color: rgba(245, 240, 232, 0.45);
    }

    .containers-section a.cta {
      color: var(--paper);
      border-color: var(--paper);
    }

    .containers-section a.cta:hover {
      background: var(--paper);
      color: var(--container-red);
    }

    .containers-image {
      display: flex;
      justify-content: center;
    }

    .containers-image img {
      max-height: 320px;
      width: auto;
      max-width: 100%;
    }

    @media (max-width: 900px) {
      .containers-section {
        grid-template-columns: 1fr;
      }
      .containers-image {
        order: 1;
      }
    }

    /* ── ABOUT SECTION ── */
    .about-section {
      background: var(--steel-gray);
      color: var(--paper);
    }

    .about-inner {
      display: grid;
      grid-template-columns: 300px 1fr;
      gap: 3rem;
      align-items: start;
    }

    .about-photo img {
      width: 100%;
      height: auto;
      filter: grayscale(15%);
    }

    .about-section .block-label {
      color: rgba(245, 240, 232, 0.4);
    }

    .about-section p {
      color: rgba(245, 240, 232, 0.8);
      margin-bottom: 1rem;
    }

    .about-section p:last-of-type {
      margin-bottom: 0;
    }

    /* ── FOOTER ── */
    footer {
      background: var(--hull-navy);
      color: rgba(245, 240, 232, 0.5);
      padding: 3rem 4rem;
      display: flex;
      justify-content: space-between;
      align-items: center;
      border-top: 3px solid var(--container-pink);
    }

    footer .footer-name {
      font-weight: 800;
      font-size: 0.8rem;
      letter-spacing: 0.12em;
      text-transform: uppercase;
      color: var(--paper);
    }

    footer .footer-links {
      display: flex;
      gap: 1.5rem;
    }

    footer .footer-links a {
      color: rgba(245, 240, 232, 0.5);
      text-decoration: none;
      font-size: 0.75rem;
      font-weight: 600;
      letter-spacing: 0.08em;
      text-transform: uppercase;
      transition: color 0.2s;
    }

    footer .footer-links a:hover {
      color: var(--container-pink);
    }

    /* ── SECTION DIVIDERS (subtle structural lines like container stacking) ── */
    .block + .block {
      border-top: 3px solid rgba(0,0,0,0.15);
    }

    .forum-section + .local-economy-section {
      border-top: 3px solid var(--container-green);
    }

    .local-economy-section + .newsletter-section {
      border-top: 3px solid var(--crane-yellow);
    }

    .newsletter-section + .book-section {
      border-top: 3px solid var(--container-pink);
    }

    .local-economy-section + .archive-section {
      border-top: 3px solid var(--container-teal);
    }

    .archive-section + .containers-section {
      border-top: 3px solid var(--container-red);
    }

    /* ── LOADING STATES ── */
    .loading-skeleton {
      height: 16px;
      background: rgba(245, 240, 232, 0.1);
      border-radius: 2px;
      margin-bottom: 0.5rem;
      animation: pulse 1.5s ease-in-out infinite;
    }

    .loading-skeleton.wide { width: 85%; }
    .loading-skeleton.medium { width: 60%; }
    .loading-skeleton.narrow { width: 40%; }

    @keyframes pulse {
      0%, 100% { opacity: 0.4; }
      50% { opacity: 0.8; }
    }

    /* ── RESPONSIVE ── */
    @media (max-width: 900px) {
      .hero {
        grid-template-columns: 1fr;
        min-height: auto;
      }

      .hero-text {
        padding: 3rem 2rem 1rem;
        text-align: center;
      }

      .hero .subtitle {
        max-width: 100%;
      }

      .hero-image {
        padding: 1rem 2rem 3rem;
      }

      .hero-image img {
        max-height: 50vh;
      }

      .block {
        padding: 2.5rem 2rem;
      }

      .book-section {
        grid-template-columns: 1fr;
      }

      .book-section .book-info {
        padding-right: 0;
        order: 2;
      }

      .book-section .book-cover {
        order: 1;
      }

      .forum-inner,
      .le-inner {
        grid-template-columns: 1fr;
      }

      .archive-section {
        grid-template-columns: 1fr;
      }

      .archive-visual {
        display: none;
      }

      .about-inner {
        grid-template-columns: 1fr;
      }

      .about-photo {
        max-width: 300px;
      }

      nav {
        padding: 0 1rem;
      }

      nav .nav-links {
        gap: 0.8rem;
      }

      nav .nav-links a {
        font-size: 0.65rem;
      }

      footer {
        flex-direction: column;
        gap: 1rem;
        text-align: center;
        padding: 2rem;
      }
    }

    @media (max-width: 600px) {
      nav .nav-links a.hide-mobile {
        display: none;
      }

      .hero h1 {
        font-size: 2.2rem;
      }
    }
  </style>
</head>
<body>

  <!-- NAV -->
  <nav>
    <div class="name">Alexis Madrigal</div>
    <div class="nav-links">
      <a href="#forum">Forum</a>
      <a href="#local-economy">Local Economy</a>
      <a href="#newsletter">Newsletter</a>
      <a href="#writing" class="hide-mobile">Writing</a>
      <a href="#archive" class="hide-mobile">Archive</a>
      <a href="#about" class="hide-mobile">About</a>
    </div>
  </nav>

  <!-- HERO -->
  <section class="hero" id="home">
    <div class="hero-drift" aria-hidden="true">
      <div class="drift-block"></div>
      <div class="drift-block"></div>
      <div class="drift-block"></div>
      <div class="drift-block"></div>
      <div class="drift-block"></div>
    </div>
    <div class="hero-text">
      <h1>Alexis<br>Madrigal</h1>
      <p class="subtitle">Journalist in Oakland, California. Co-host of KQED's Forum. Author of The Pacific Circuit. Proprietor of Local Economy.</p>
    </div>
    <div class="hero-image">
      <img src="https://images.squarespace-cdn.com/content/v1/5846fccd1b631b042d8bb107/0a276c42-2abe-4ad4-ad59-def4c7786f31/alexis+horizontal.jpg" alt="Alexis Madrigal">
    </div>
    <div class="hero-water"></div>
  </section>

  <!-- FORUM (elevated) -->
  <section class="block forum-section" id="forum">
    <div class="block-label">On Air</div>
    <h2>Forum on KQED</h2>
    <div class="forum-inner" style="margin-top: 1.5rem;">
      <div class="forum-desc">
        <img src="https://images.squarespace-cdn.com/content/v1/5846fccd1b631b042d8bb107/1732128372138-Z336IX7EJQDP5TI46CKP/KQED+Forum+-website.jpg?format=1000w" alt="KQED Forum with Mina Kim and Alexis Madrigal" style="width: 100%; height: auto; margin-bottom: 1.5rem;">
        <p>Alexis co-hosts Forum with Mina Kim on KQED, the Bay Area's NPR station. Weekdays 9&ndash;11am, they host conversations that inform, challenge, and unify listeners with big ideas and different viewpoints. Alexis anchors the 9 o'clock hour.</p>
        <a href="https://www.kqed.org/forum" class="cta" target="_blank">All Episodes</a>
      </div>
      <div class="forum-episodes" id="forum-episodes">
        <h3>Forum with Alexis Madrigal</h3>
        <div id="episodes-container">
          <div class="loading-skeleton wide"></div>
          <div class="loading-skeleton medium"></div>
          <div class="loading-skeleton narrow"></div>
          <div style="height: 1rem;"></div>
          <div class="loading-skeleton wide"></div>
          <div class="loading-skeleton medium"></div>
          <div class="loading-skeleton narrow"></div>
        </div>
      </div>
    </div>
  </section>

  <!-- LOCAL ECONOMY (elevated) -->
  <section class="block local-economy-section" id="local-economy">
    <div class="block-label">Community</div>
    <h2>Local Economy</h2>
    <div class="le-inner" style="margin-top: 1.5rem;">
      <div class="le-desc">
        <p>A community resilience hub at 6028 College Ave in Oakland. Local Economy is an antidote to chaos and isolation&mdash;a sunny storefront where neighbors gather, ideas grow, and local relationships form the basis of something stronger.</p>
        <p style="margin-top: 0.8rem;">Open Wednesday&ndash;Saturday, 8:30am&ndash;4pm, with evening events ranging from liberation ecology workshops to worldbuilding salons. Supported by members who believe that local spaces and the relationships within them are a real counter to the disconnection of modern life.</p>
        <a href="https://www.thelocaleconomy.com" class="cta" target="_blank">Visit Local Economy</a>
      </div>
      <div class="le-events" id="le-events">
        <h3>Upcoming Events</h3>
        <div id="events-container">
          <div class="loading-skeleton wide"></div>
          <div class="loading-skeleton medium"></div>
          <div style="height: 1rem;"></div>
          <div class="loading-skeleton wide"></div>
          <div class="loading-skeleton medium"></div>
        </div>
      </div>
    </div>
  </section>

  <!-- ONE GOOD THING NEWSLETTER -->
  <section class="block newsletter-section" id="newsletter">
    <div class="newsletter-info">
      <div class="block-label">Newsletter</div>
      <h2>One Good Thing</h2>
      <p>Every Thursday&mdash;from the trails to the streets: Bay Area art, culture &amp; nature brought to you by Alexis Madrigal. A weekly dispatch about one thing worth your time in the San Francisco Bay Area.</p>
      <a href="https://www.kqed.org/newsletters/onegoodthing" class="cta" target="_blank">Subscribe</a>
    </div>
    <div class="newsletter-image">
      <img src="https://cdn.kqed.org/wp-content/uploads/2025/09/Newsletter-One-Good-Thing-Desktop-440x550@2x.png" alt="One Good Thing — KQED newsletter by Alexis Madrigal">
    </div>
  </section>

  <!-- WRITING (book + containers, de-emphasized) -->
  <section class="block book-section" id="writing">
    <div class="book-info">
      <div class="block-label">Writing</div>
      <h2>The Pacific Circuit</h2>
      <p>An electrifying account of how a logistical revolution that began in Oakland has transformed urban America. The product of nearly a decade of reporting on Oakland, the technology industry, and the global economy.</p>
      <p style="margin-top: 0.8rem; font-size: 0.9rem; opacity: 0.8;">Published by MCD&thinsp;×&thinsp;FSG</p>
      <a href="https://www.alexismadrigal.com/book" class="cta" target="_blank">Learn More</a>
    </div>
    <div class="book-cover">
      <img src="https://images.squarespace-cdn.com/content/v1/5846fccd1b631b042d8bb107/1732079114710-KDJCA238MB8V4QFIHAMQ/image-asset.jpeg?format=750w" alt="The Pacific Circuit book cover">
    </div>
  </section>

  <!-- ARCHIVE -->
  <section class="block archive-section" id="archive">
    <div>
      <div class="block-label">Research</div>
      <h2>How the Bay Was Built</h2>
      <p>An archival documents depot exploring the physical and social infrastructure of the San Francisco Bay Area. Primary sources, maps, planning documents, and the material record of how a region was made.</p>
      <a href="https://howthebaywasbuilt.com" class="cta" target="_blank">Explore the Archive</a>
    </div>
    <div class="archive-visual">
      <div class="archive-graphic">
        Maps &<br>Documents
      </div>
    </div>
  </section>

  <!-- CONTAINERS PODCAST -->
  <section class="block containers-section" id="containers">
    <div>
      <div class="block-label">Podcast</div>
      <h2>Containers</h2>
      <p>An 8-part podcast about how global trade, the technology that makes it possible, and the labor that makes it run have reshaped the world. Told through the lens of the Port of Oakland and the people who keep goods moving.</p>
      <a href="https://podcasts.apple.com/us/podcast/containers/id1209559177" class="cta" target="_blank">Listen</a>
    </div>
    <div class="containers-image">
      <img src="https://images.squarespace-cdn.com/content/v1/5846fccd1b631b042d8bb107/1523556662349-60CXUOTA6KGXK5O4K49J/716B9442.jpg?format=1000w" alt="Containers, a podcast — Oakland port and container shipping">
    </div>
  </section>

  <!-- ABOUT -->
  <section class="block about-section" id="about">
    <div class="block-label">About</div>
    <div class="about-inner">
      <div class="about-photo">
        <img src="https://images.squarespace-cdn.com/content/v1/5846fccd1b631b042d8bb107/0a276c42-2abe-4ad4-ad59-def4c7786f31/alexis+horizontal.jpg" alt="Alexis Madrigal">
      </div>
      <div class="about-text">
        <p>Alexis Madrigal is a journalist in Oakland, California. He co-hosts KQED's current affairs show, Forum, and is a contributing writer at The Atlantic, where he co-founded The COVID Tracking Project.</p>
        <p>His book, The Pacific Circuit, explores how a logistical revolution that began in Oakland has reshaped American cities. He previously served as editor-in-chief of Fusion and as a staff writer at Wired.</p>
        <p>He created the 8-part podcast Containers and is the proprietor of Local Economy, a community space in Oakland's Rockridge neighborhood. He also runs the Oakland Garden Club, a newsletter for people who like to think about plants.</p>
        <p>He has been a visiting scholar at UC Berkeley's School of Information and the Center for Science, Technology, Medicine &amp; Society.</p>
        <p style="margin-top: 1.5rem;">
          <a href="mailto:alexis.madrigal@gmail.com" style="color: var(--container-pink); text-decoration: none; font-weight: 600; font-size: 0.85rem; letter-spacing: 0.05em;">CONTACT &rarr;</a>
        </p>
      </div>
    </div>
  </section>

  <!-- FOOTER -->
  <footer>
    <div class="footer-name">Alexis Madrigal</div>
    <div class="footer-links">
      <a href="https://www.kqed.org/forum" target="_blank">Forum</a>
      <a href="https://www.thelocaleconomy.com" target="_blank">Local Economy</a>
      <a href="https://www.kqed.org/newsletters/onegoodthing" target="_blank">Newsletter</a>
      <a href="https://howthebaywasbuilt.com" target="_blank">Archive</a>
      <a href="https://www.thepacificcircuit.com" target="_blank">Book</a>
    </div>
  </footer>

  <!-- DYNAMIC CONTENT SCRIPTS -->
  <script>
    // ── FORUM EPISODES ──
    // Strategy: Try Megaphone RSS feed first (richer data), fall back to
    // iTunes API, then to a static KQED link. Forum publishes two episodes
    // per weekday (9am + 10am hour). Within each day the 9am episode is
    // consistently uploaded *before* the 10am episode, so we group by date
    // and pick the earlier release to surface Alexis's hour.

    function fetchWithTimeout(url, ms) {
      const controller = new AbortController();
      const timer = setTimeout(() => controller.abort(), ms);
      return fetch(url, { signal: controller.signal }).finally(() => clearTimeout(timer));
    }

    function pick9amEpisodes(episodes, limit) {
      // Group by calendar date (YYYY-MM-DD)
      const byDate = {};
      episodes.forEach(ep => {
        const key = ep.date;
        if (!byDate[key]) byDate[key] = [];
        byDate[key].push(ep);
      });
      // For each date pick the earlier upload (= 9am hour)
      const out = [];
      Object.keys(byDate).sort().reverse().forEach(key => {
        const dayEps = byDate[key];
        if (dayEps.length >= 2) {
          dayEps.sort((a, b) => a.ts - b.ts);   // earliest first
          out.push(dayEps[0]);
        } else {
          out.push(dayEps[0]);
        }
      });
      return out.slice(0, limit);
    }

    function renderEpisodes(container, episodes) {
      container.innerHTML = episodes.map(ep => `
        <div class="episode-card">
          <div class="episode-date">${ep.dateLabel}</div>
          <div class="episode-title"><a href="${ep.link}" target="_blank">${ep.title}</a></div>
          ${ep.audio ? `<div class="episode-listen"><a href="${ep.audio}" target="_blank">Listen &rarr;</a></div>` : ''}
        </div>
      `).join('');
    }

    // Source 1: Megaphone RSS feed (XML → DOMParser)
    async function loadFromRSS() {
      const resp = await fetchWithTimeout('https://feeds.megaphone.fm/KQINC9557381633', 12000);
      const text = await resp.text();
      const xml = new DOMParser().parseFromString(text, 'text/xml');
      if (xml.querySelector('parsererror')) throw new Error('XML parse error');
      const items = xml.querySelectorAll('item');
      const episodes = [];
      items.forEach(item => {
        const title = (item.querySelector('title') || {}).textContent || '';
        const pubDate = (item.querySelector('pubDate') || {}).textContent || '';
        const enclosure = item.querySelector('enclosure');
        const audio = enclosure ? enclosure.getAttribute('url') : '';
        const d = new Date(pubDate);
        if (isNaN(d)) return;
        episodes.push({
          title,
          date: d.toISOString().substring(0, 10),
          ts: d.getTime(),
          dateLabel: d.toLocaleDateString('en-US', { weekday: 'short', month: 'short', day: 'numeric' }),
          link: 'https://www.kqed.org/forum',
          audio
        });
      });
      if (!episodes.length) throw new Error('No RSS episodes');
      return episodes;
    }

    // Source 2: iTunes / Apple Podcasts Lookup API
    async function loadFromiTunes() {
      const resp = await fetchWithTimeout(
        'https://itunes.apple.com/lookup?id=73329719&entity=podcastEpisode&limit=20&sort=recent', 12000
      );
      const data = await resp.json();
      const items = (data.results || []).filter(r => r.wrapperType === 'podcastEpisode');
      if (!items.length) throw new Error('No iTunes episodes');
      return items.map(ep => {
        const d = new Date(ep.releaseDate);
        return {
          title: ep.trackName || 'Untitled',
          date: ep.releaseDate.substring(0, 10),
          ts: d.getTime(),
          dateLabel: d.toLocaleDateString('en-US', { weekday: 'short', month: 'short', day: 'numeric' }),
          link: ep.trackViewUrl || 'https://www.kqed.org/forum',
          audio: ep.episodeUrl || ''
        };
      });
    }

    async function loadForumEpisodes() {
      const container = document.getElementById('episodes-container');
      try {
        // Try RSS first, then iTunes
        let all;
        try { all = await loadFromRSS(); }
        catch { all = await loadFromiTunes(); }

        const episodes = pick9amEpisodes(all, 4);
        if (!episodes.length) throw new Error('No episodes after filtering');
        renderEpisodes(container, episodes);
      } catch (err) {
        container.innerHTML = `
          <div class="episode-card">
            <div class="episode-title" style="margin-bottom: 0.5rem;">
              <a href="https://www.kqed.org/forum" target="_blank" style="color: var(--container-teal);">
                Listen to the latest episodes at kqed.org/forum &rarr;
              </a>
            </div>
            <div class="episode-date">Live weekdays 9&ndash;11am on 88.5 FM</div>
          </div>
        `;
      }
    }

    // ── LUMA EVENTS (Local Economy) ──
    async function loadLumaEvents() {
      const container = document.getElementById('events-container');
      const calendarId = 'cal-7e3UHJX4UgCZaoW';

      try {
        // Try Luma's public API
        const lumaUrl = `https://api.lu.ma/calendar/get-items?calendar_api_id=${calendarId}&pagination_limit=5`;
        const response = await fetch('https://api.allorigins.win/raw?url=' + encodeURIComponent(lumaUrl));

        if (!response.ok) {
          throw new Error('Luma API unavailable');
        }

        const data = await response.json();
        const entries = data.entries || [];

        // Filter for upcoming events
        const now = new Date();
        const upcoming = entries
          .filter(entry => {
            const eventDate = new Date(entry.event?.start_at || entry.start_at);
            return eventDate >= now;
          })
          .slice(0, 4);

        if (upcoming.length === 0) {
          showLumaFallback(container);
          return;
        }

        container.innerHTML = upcoming.map(entry => {
          const event = entry.event || entry;
          const date = new Date(event.start_at);
          const dateStr = date.toLocaleDateString('en-US', {
            weekday: 'short',
            month: 'short',
            day: 'numeric'
          });
          const timeStr = date.toLocaleTimeString('en-US', {
            hour: 'numeric',
            minute: '2-digit',
            hour12: true
          });
          const name = event.name || 'Untitled Event';
          const url = event.url ? `https://lu.ma/${event.url}` : `https://lu.ma/calendar/${calendarId}`;
          const desc = event.description ? event.description.substring(0, 120) + (event.description.length > 120 ? '...' : '') : '';

          return `
            <div class="event-card">
              <div class="event-date">${dateStr} &middot; ${timeStr}</div>
              <div class="event-name"><a href="${url}" target="_blank">${name}</a></div>
              ${desc ? `<div class="event-desc-text">${desc}</div>` : ''}
            </div>
          `;
        }).join('');

      } catch (err) {
        showLumaFallback(container);
      }
    }

    function showLumaFallback(container) {
      container.innerHTML = `
        <div class="event-card">
          <div class="event-name">
            <a href="https://lu.ma/calendar/cal-7e3UHJX4UgCZaoW" target="_blank">
              See all upcoming events &rarr;
            </a>
          </div>
          <div class="event-desc-text">Browse the full calendar on Luma for workshops, salons, and community gatherings.</div>
        </div>
      `;
    }

    // ── INIT ──
    document.addEventListener('DOMContentLoaded', () => {
      loadForumEpisodes();
      loadLumaEvents();
    });
  </script>

</body>
</html>
